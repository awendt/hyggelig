<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>Class: ArkanisDevelopment::SimpleLocalization::NestedHash</title>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
  <meta http-equiv="Content-Script-Type" content="text/javascript" />
  <link rel="stylesheet" href="../../.././rdoc-style.css" type="text/css" media="screen" />
  <script type="text/javascript">
  // <![CDATA[

  function popupCode( url ) {
    window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
  }

  function toggleCode( id ) {
    if ( document.getElementById )
      elem = document.getElementById( id );
    else if ( document.all )
      elem = eval( "document.all." + id );
    else
      return false;

    elemStyle = elem.style;
    
    if ( elemStyle.display != "block" ) {
      elemStyle.display = "block"
    } else {
      elemStyle.display = "none"
    }

    return true;
  }
  
  // Make codeblocks hidden by default
  document.writeln( "<style type=\"text/css\">div.method-source-code { display: none }</style>" )
  
  // ]]>
  </script>

</head>
<body>



    <div id="classHeader">
        <table class="header-table">
        <tr class="top-aligned-row">
          <td><strong>Class</strong></td>
          <td class="class-name-in-header">ArkanisDevelopment::SimpleLocalization::NestedHash</td>
        </tr>
        <tr class="top-aligned-row">
            <td><strong>In:</strong></td>
            <td>
                <a href="../../../files/lib/nested_hash_rb.html">
                lib/nested_hash.rb
                </a>
        <br />
            </td>
        </tr>

        <tr class="top-aligned-row">
            <td><strong>Parent:</strong></td>
            <td>
                Hash
            </td>
        </tr>
        </table>
    </div>
  <!-- banner header -->

  <div id="bodyContent">



  <div id="contextContent">

    <div id="description">
      <p>
A <a href="NestedHash.html">NestedHash</a> is an extended Hash to make
handling of nested hash structures easier. It adds a quick way to access
and set keys of nested hashes as well as recursive <a
href="NestedHash.html#M000061">merge!</a> and <a
href="NestedHash.html#M000062">dup</a> methods to merge or duplicate
structures.
</p>
<pre>
  nh = NestedHash.from {:a =&gt; 1, :b =&gt; {:x =&gt; 9}}
  nh = NestedHash[:a =&gt; 1, :b =&gt; {:x =&gt; 9}]

  nh[:a]          # =&gt; 1
  nh[:b, :x]      # =&gt; 9
  nh[:b, :y] = 88
  nh              # =&gt; {:a =&gt; 1, :b =&gt; {:x =&gt; 9, :y =&gt; 88}}
  nh.merge! {:c =&gt; 2, :b =&gt; {:z =&gt; 'end'}
  nh              # =&gt; {:a =&gt; 1, :b =&gt; {:x =&gt; 9, :y =&gt; 88, :z =&gt; 'end'}, :c =&gt; 2}
</pre>

    </div>


   </div>

    <div id="method-list">
      <h3 class="section-bar">Methods</h3>

      <div class="name-list">
      <a href="#M000059">[]</a>&nbsp;&nbsp;
      <a href="#M000060">[]=</a>&nbsp;&nbsp;
      <a href="#M000062">dup</a>&nbsp;&nbsp;
      <a href="#M000058">from</a>&nbsp;&nbsp;
      <a href="#M000061">merge!</a>&nbsp;&nbsp;
      </div>
    </div>

  </div>


    <!-- if includes -->

    <div id="section">





      


    <!-- if method_list -->
    <div id="methods">
      <h3 class="section-bar">Public Class methods</h3>

      <div id="method-M000058" class="method-detail">
        <a name="M000058"></a>

        <div class="method-heading">
          <a href="#M000058" class="method-signature">
          <span class="method-name">from</span><span class="method-args">(hash)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Creates a new <a href="NestedHash.html">NestedHash</a> object out of an
ordinary hash (or anything that is based on the class Hash).
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000058-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000058-source">
<pre>
    <span class="ruby-comment cmt"># File lib/nested_hash.rb, line 23</span>
23:       <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">from</span>(<span class="ruby-identifier">hash</span>)
24:         <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">hash</span>.<span class="ruby-identifier">kind_of?</span>(<span class="ruby-constant">Hash</span>)
25:         <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">hash</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">hash</span>.<span class="ruby-identifier">kind_of?</span>(<span class="ruby-keyword kw">self</span>)
26:         <span class="ruby-identifier">new_nested_hash</span> = <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">new</span>
27:         <span class="ruby-identifier">hash</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">key</span>, <span class="ruby-identifier">value</span><span class="ruby-operator">|</span>
28:           <span class="ruby-identifier">new_nested_hash</span>[<span class="ruby-identifier">key</span>] = <span class="ruby-identifier">value</span>
29:         <span class="ruby-keyword kw">end</span>
30:         <span class="ruby-identifier">new_nested_hash</span>
31:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <h3 class="section-bar">Public Instance methods</h3>

      <div id="method-M000059" class="method-detail">
        <a name="M000059"></a>

        <div class="method-heading">
          <a href="#M000059" class="method-signature">
          <span class="method-name">[]</span><span class="method-args">(*keys)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Gets a key out of the hash. To make access to keys of nested hashes easier
you can specify multiple keys, one per level.
</p>
<pre>
  h = NestedHash[:a =&gt; 1, :b =&gt; {:x =&gt; 10, :y =&gt; 'test'}]
  h[:a]         # =&gt; 1
  h[:b, :x]     # =&gt; 10
  h[:b, :y]     # =&gt; 'test'
  h[:b, :dummy] #=&gt; nil
</pre>
<p>
Please note that ordinary hashes inside the hierarchical hash are not
altered. If you access them they will be returned as ordinary hashes.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000059-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000059-source">
<pre>
    <span class="ruby-comment cmt"># File lib/nested_hash.rb, line 44</span>
44:       <span class="ruby-keyword kw">def</span> <span class="ruby-operator">[]</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">keys</span>)
45:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">keys</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">&lt;=</span> <span class="ruby-value">1</span>
46:           <span class="ruby-keyword kw">super</span>
47:         <span class="ruby-keyword kw">else</span>
48:           <span class="ruby-identifier">keys</span>.<span class="ruby-identifier">inject</span>(<span class="ruby-keyword kw">self</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">memo</span>, <span class="ruby-identifier">key</span><span class="ruby-operator">|</span>
49:             <span class="ruby-identifier">memo</span>[<span class="ruby-identifier">key</span>] <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">memo</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">memo</span>.<span class="ruby-identifier">kind_of?</span>(<span class="ruby-constant">Hash</span>)
50:           <span class="ruby-keyword kw">end</span> <span class="ruby-operator">||</span> (<span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">default_proc</span> <span class="ruby-value">? </span><span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">default_proc</span>.<span class="ruby-identifier">call</span> <span class="ruby-operator">:</span> <span class="ruby-keyword kw">nil</span>) <span class="ruby-operator">||</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">default</span>
51:         <span class="ruby-keyword kw">end</span>
52:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000060" class="method-detail">
        <a name="M000060"></a>

        <div class="method-heading">
          <a href="#M000060" class="method-signature">
          <span class="method-name">[]=</span><span class="method-args">(*args)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Sets a key to the specified value. To make access to keys of nested hashes
easier you can specify multiple keys, one per level. If the specified
series of keys (the nested hashes inside) does not exist the necessary
hashes inside this <a href="NestedHash.html">NestedHash</a> will be created
automatically.
</p>
<pre>
  h = HierarchicalHash[:a =&gt; 1, :b =&gt; {:x =&gt; 10, :y =&gt; 'test'}]
  h[:a] = 2
  h[:b, :x] = 20
  h[:b, :y] = 'next test'

  h[:dummy, :next] # =&gt; nil
  h[:dummy, :next] = 'auto create of nested hashes'
  h[:dummy, :next] # =&gt; 'auto create of nested hashes'
</pre>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000060-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000060-source">
<pre>
    <span class="ruby-comment cmt"># File lib/nested_hash.rb, line 68</span>
68:       <span class="ruby-keyword kw">def</span> <span class="ruby-operator">[]=</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>)
69:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">args</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">&lt;=</span> <span class="ruby-value">2</span>
70:           <span class="ruby-keyword kw">super</span>
71:         <span class="ruby-keyword kw">else</span>
72:           <span class="ruby-identifier">value</span> = <span class="ruby-identifier">args</span>.<span class="ruby-identifier">pop</span>
73:           <span class="ruby-identifier">last_key</span> = <span class="ruby-identifier">args</span>.<span class="ruby-identifier">pop</span>
74:           <span class="ruby-identifier">keys</span> = <span class="ruby-identifier">args</span>
75:           
76:           <span class="ruby-identifier">target_hash</span> = <span class="ruby-identifier">keys</span>.<span class="ruby-identifier">inject</span>(<span class="ruby-keyword kw">self</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">memo</span>, <span class="ruby-identifier">key</span><span class="ruby-operator">|</span>
77:             <span class="ruby-keyword kw">begin</span> <span class="ruby-identifier">memo</span>[<span class="ruby-identifier">key</span>] <span class="ruby-keyword kw">rescue</span> <span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">end</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">memo</span>[<span class="ruby-identifier">key</span>] = {}
78:           <span class="ruby-keyword kw">end</span>
79:           
80:           <span class="ruby-identifier">target_hash</span>[<span class="ruby-identifier">last_key</span>] = <span class="ruby-identifier">value</span>
81:           <span class="ruby-identifier">value</span>
82:         <span class="ruby-keyword kw">end</span>
83:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000062" class="method-detail">
        <a name="M000062"></a>

        <div class="method-heading">
          <a href="#M000062" class="method-signature">
          <span class="method-name">dup</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Duplicates this NeastedHash and (recursive) all hashes within it.
</p>
<p>
Please note that all hashes within this NeastedHash are converted to
NeastedHash objects.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000062-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000062-source">
<pre>
     <span class="ruby-comment cmt"># File lib/nested_hash.rb, line 104</span>
104:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">dup</span>
105:         <span class="ruby-identifier">new_dup</span> = <span class="ruby-keyword kw">super</span>
106:         <span class="ruby-identifier">new_dup</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">key</span>, <span class="ruby-identifier">value</span><span class="ruby-operator">|</span>
107:           <span class="ruby-identifier">new_dup</span>[<span class="ruby-identifier">key</span>] = <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">from</span>(<span class="ruby-identifier">value</span>).<span class="ruby-identifier">dup</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">value</span>.<span class="ruby-identifier">kind_of?</span>(<span class="ruby-constant">Hash</span>)
108:         <span class="ruby-keyword kw">end</span>
109:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000061" class="method-detail">
        <a name="M000061"></a>

        <div class="method-heading">
          <a href="#M000061" class="method-signature">
          <span class="method-name">merge!</span><span class="method-args">(other_hash)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Merges the hash <tt>other_hash</tt> into this nested hash.
</p>
<p>
Please note that this method modifies this nested hash directly and does
not work on a copy. Hash inside these two objects are converted to <a
href="NestedHash.html">NestedHash</a> objects during the merge process.
</p>
<p>
Based on &quot;Hash recursive merge in Ruby&quot; by Rex Chung: <a
href="http://www.rexchung.com/2007/02/01/hash-recursive-merge-in-ruby">www.rexchung.com/2007/02/01/hash-recursive-merge-in-ruby</a>/
Added a bit more spice and flexibility&#8230;
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000061-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000061-source">
<pre>
    <span class="ruby-comment cmt"># File lib/nested_hash.rb, line 94</span>
94:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">merge!</span>(<span class="ruby-identifier">other_hash</span>)
95:         <span class="ruby-keyword kw">super</span>(<span class="ruby-identifier">other_hash</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">key</span>, <span class="ruby-identifier">old_val</span>, <span class="ruby-identifier">new_val</span><span class="ruby-operator">|</span>
96:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">old_val</span>.<span class="ruby-identifier">kind_of?</span>(<span class="ruby-constant">Hash</span>) <span class="ruby-keyword kw">then</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">from</span>(<span class="ruby-identifier">old_val</span>).<span class="ruby-identifier">merge!</span>(<span class="ruby-identifier">new_val</span>) <span class="ruby-keyword kw">else</span> <span class="ruby-identifier">new_val</span> <span class="ruby-keyword kw">end</span>
97:         <span class="ruby-keyword kw">end</span>
98:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>


    </div>


  </div>


<div id="validator-badges">
  <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
</div>

</body>
</html>